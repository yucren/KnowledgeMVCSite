@using KnowledgeMVCSite.Models
@model List<Knowledge>
@{
    ViewBag.Title = "Index";
}

<div id="app">
    <div id="searchBarDIV">
        <form id="searchBar" style="margin-top:10px;width:100%;" class="form-inline" action='@Url.Action("Index","Home")'>

            <div class="form-group" style="width:100%">
                <span style="position:absolute;top:11px;right:7%;" class="glyphicon glyphicon-search"></span>
                <input style="width:100%" id="searchValue" name="searchValue" type="text" class="form-control " placeholder="标题或者内容" onkeydown="search(event)" />
            </div>
        </form>
    </div>
    <div class="row" style="margin-left:0;margin-right:0;margin-bottom:5px; padding: 10px 0; background-color:white">
        <div class="col-md-12">
            <a href='@Url.Action("Create","Knowledge")' class="btn btn-primary">
                <span class="glyphicon">
                    <img src="~/Content/img/Create.png" />
                </span> 创建知识
            </a>

        </div>

    </div>
</div>


<div id="contentBody" style="margin-bottom:30px">


    @Html.Partial("SearchPartial", Model)


</div>




@section Scripts
{
    <script>

        @if (ViewBag.catalog == null)
        {
            @:catalog = null;
        }
        else
        {
             @:catalog = @ViewBag.catalog;
        }

        searchValue = '@ViewBag.searchValue';


        $(window).scroll(function () {
            var scrollTop = $(this).scrollTop();    //滚动条滚动距离
            var scrollHeight = $(document).height();//文档内容高度
            var windowHeight = $(this).height();  //文档可视区域高度
            if (scrollTop > 35) {
                $('#headTitle').hide();
                $('#searchBar').appendTo($('#head'));
                $('#searchBar').css({
                    position: 'absolute',
                    top: 0,
                    left: '5px',
                    width: '70%',
                })

            }
            else {
                $('#headTitle').show();
                $('#searchBar').appendTo($('#searchBarDIV'));
                $('#searchBar').css({
                    position: 'static',
                    width: '100%',
                })
            }
            if ( scrollHeight- scrollTop - windowHeight == 0 ) {
                more();
            }
        });
    </script>


}


